[build]
  publish = "dist"
  command = "npm run build"

# Redirect API calls and dynamic SEO routes to Render backend
[[redirects]]
  from = "/api/*"
  to = "https://jeopardy-b937.onrender.com/:splat"
  status = 200
  force = true

[[redirects]]
  from = "/generate-quiz"
  to = "https://jeopardy-b937.onrender.com/generate-quiz"
  status = 200
  force = true

[[redirects]]
  from = "/sitemap.xml"
  to = "https://jeopardy-b937.onrender.com/sitemap.xml"
  status = 200
  force = true

# Serve SPA for quiz pages so the app always mounts (no static HTML from backend)
[[redirects]]
  from = "/quiz/:id"
  to = "/index.html"
  status = 200
  force = false

[[redirects]]
  # Serve the static English landing only at the exact /en root
  # Serve the SPA for English root and subpaths so components always load (no static HTML)
  from = "/en"
  to = "/index.html"
  status = 200
  force = false

[[redirects]]
  # Let the SPA handle any English subroutes so components load (e.g. /en/team-setup)
  from = "/en/*"
  to = "/index.html"
  status = 200
  force = false

[[redirects]]
  # Serve the static Italian landing only at the exact /it root
  # Serve the SPA for Italian root and subpaths so components always load (no static HTML)
  from = "/it"
  to = "/index.html"
  status = 200
  force = false

[[redirects]]
  # Let the SPA handle any Italian subroutes so components load (e.g. /it/team-setup)
  from = "/it/*"
  to = "/index.html"
  status = 200
  force = false

[[redirects]]
  # SPA catch-all: serve index.html for any client-side route so direct visits don't 404
  from = "/*"
  to = "/index.html"
  status = 200
  force = false

# Optional: forward any other server endpoints under /server/* to Render
[[redirects]]
  from = "/server/*"
  to = "https://jeopardy-b937.onrender.com/:splat"
  status = 200
  force = true
